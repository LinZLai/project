"use strict";(self["webpackChunksystem_vue"]=self["webpackChunksystem_vue"]||[]).push([[863],{7863:function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"register"},[i("div",{staticStyle:{margin:"100px auto","background-color":"#fff",width:"350px",height:"400px",padding:"20px","border-radius":"10px"}},[e._m(0),i("el-form",{ref:"userForm",attrs:{model:e.user,rules:e.rules}},[i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请输入账号",size:"medium","prefix-icon":"el-icon-user"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请输入密码",size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),i("el-form-item",{attrs:{prop:"confirmPassword"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请确认密码",size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),i("el-form-item",{staticStyle:{margin:"3px auto","text-align":"center"}},[i("VerificationCode",{on:{checkIDCode:e.check}})],1),i("el-form-item",{staticStyle:{margin:"10px auto","text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"medium",autocomplete:"off"},on:{click:e.login}},[e._v("注册")]),i("el-button",{attrs:{type:"warning",size:"medium",autocomplete:"off"},on:{click:function(t){return e.$router.push("/login")}}},[e._v("返回登录")])],1)],1)],1)])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{margin:"20px 0","text-align":"center","font-size":"24px"}},[i("b",[e._v("注 册")])])}];function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"VCode"},[i("el-input",{attrs:{placeholder:"请输入验证码",size:"medium"},on:{blur:e.checkCode},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkCode.apply(null,arguments)}},model:{value:e.inputCode,callback:function(t){e.inputCode=t},expression:"inputCode"}}),i("span",{staticClass:"s-canvas",attrs:{title:"看不清楚，换一张"},on:{click:e.changeCode}},[i("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])],1)},u=[],d=(i(9653),i(43290),{name:"VerificationCode",data:function(){return{identifyCode:"",inputCode:"",flag:!1}},props:{identifyCodes:{type:String,default:"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:100},contentHeight:{type:Number,default:44}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic(),this.makeCode(this.identifyCodes,4)},methods:o({checkCode:function(){this.inputCode.toLowerCase()==this.identifyCode.toLowerCase()?(this.flag=!0,this.$emit("checkIDCode",this.flag)):(this.$message.error("验证码错误"),this.inputCode="",this.changeCode())},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){var i=this.randomNum(e,t),n=this.randomNum(e,t),r=this.randomNum(e,t);return"rgb("+i+","+n+","+r+")"},drawPic:function(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(var i=0;i<this.identifyCode.length;i++)this.drawText(t,this.identifyCode[i],i);this.drawLine(t),this.drawDot(t)},drawText:function(e,t,i){e.fillStyle=this.randomColor(50,160),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var n=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),r=this.randomNum(this.fontSizeMax,this.contentHeight-5),o=this.randomNum(-30,30);e.translate(n,r),e.rotate(o*Math.PI/180),e.fillText(t,0,0),e.rotate(-o*Math.PI/180),e.translate(-n,-r)},drawLine:function(e){for(var t=0;t<4;t++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<30;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()},changeCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var i=0;i<t;i++)this.identifyCode+=e[this.randomNum(0,e.length)];this.$emit("update:changeCode",this.identifyCode)}},"randomNum",(function(e,t){return Math.floor(Math.random()*(t-e)+e)}))}),l=d,c=i(1001),m=(0,c.Z)(l,a,u,!1,null,"524ad900",null),h=m.exports,f=(s={components:{VerificationCode:h},name:"Register",data:function(){return{flag:!1,user:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}]}}}},o(s,"components",{VerificationCode:h}),o(s,"mounted",(function(){})),o(s,"methods",{login:function(){var e=this;this.$refs["userForm"].validate((function(t){if(t){if(e.user.password!==e.user.confirmPassword)return e.$message.error("两次输入的密码不一致"),!1;e.flag&&e.$axios.post("/register",e.user).then((function(t){"200"==t.data.code?(e.$message.success("注册成功"),e.$router.push("/login")):e.$message.error(t.data.msg)}))}}))},check:function(e){this.flag=e,this.login()}}),s),p=f,g=(0,c.Z)(p,n,r,!1,null,"73601984",null),C=g.exports}}]);
//# sourceMappingURL=863-legacy.0fc87702.js.map