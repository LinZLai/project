"use strict";(self["webpackChunksystem_vue"]=self["webpackChunksystem_vue"]||[]).push([[61],{5061:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"register"},[i("div",{staticStyle:{margin:"100px auto","background-color":"#fff",width:"350px",height:"400px",padding:"20px","border-radius":"10px"}},[e._m(0),i("el-form",{ref:"userForm",attrs:{model:e.user,rules:e.rules}},[i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请输入账号",size:"medium","prefix-icon":"el-icon-user"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请输入密码",size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),i("el-form-item",{attrs:{prop:"confirmPassword"}},[i("el-input",{staticStyle:{margin:"3px 0"},attrs:{placeholder:"请确认密码",size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),i("el-form-item",{staticStyle:{margin:"3px auto","text-align":"center"}},[i("VerificationCode",{on:{checkIDCode:e.check}})],1),i("el-form-item",{staticStyle:{margin:"10px auto","text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"medium",autocomplete:"off"},on:{click:e.login}},[e._v("注册")]),i("el-button",{attrs:{type:"warning",size:"medium",autocomplete:"off"},on:{click:function(t){return e.$router.push("/login")}}},[e._v("返回登录")])],1)],1)],1)])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{margin:"20px 0","text-align":"center","font-size":"24px"}},[i("b",[e._v("注 册")])])}],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"VCode"},[i("el-input",{attrs:{placeholder:"请输入验证码",size:"medium"},on:{blur:e.checkCode},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkCode.apply(null,arguments)}},model:{value:e.inputCode,callback:function(t){e.inputCode=t},expression:"inputCode"}}),i("span",{staticClass:"s-canvas",attrs:{title:"看不清楚，换一张"},on:{click:e.changeCode}},[i("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])],1)},n=[],a={name:"VerificationCode",data(){return{identifyCode:"",inputCode:"",flag:!1}},props:{identifyCodes:{type:String,default:"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:100},contentHeight:{type:Number,default:44}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic(),this.makeCode(this.identifyCodes,4)},methods:{checkCode(){this.inputCode.toLowerCase()==this.identifyCode.toLowerCase()?(this.flag=!0,this.$emit("checkIDCode",this.flag)):(this.$message.error("验证码错误"),this.inputCode="",this.changeCode())},randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let i=this.randomNum(e,t),r=this.randomNum(e,t),o=this.randomNum(e,t);return"rgb("+i+","+r+","+o+")"},drawPic(){let e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let i=0;i<this.identifyCode.length;i++)this.drawText(t,this.identifyCode[i],i);this.drawLine(t),this.drawDot(t)},drawText(e,t,i){e.fillStyle=this.randomColor(50,160),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let r=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),o=this.randomNum(this.fontSizeMax,this.contentHeight-5);var s=this.randomNum(-30,30);e.translate(r,o),e.rotate(s*Math.PI/180),e.fillText(t,0,0),e.rotate(-s*Math.PI/180),e.translate(-r,-o)},drawLine(e){for(let t=0;t<4;t++)e.strokeStyle=this.randomColor(100,200),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<30;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()},changeCode(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let i=0;i<t;i++)this.identifyCode+=e[this.randomNum(0,e.length)];this.$emit("update:changeCode",this.identifyCode)},randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)}}},d=a,l=i(1001),u=(0,l.Z)(d,s,n,!1,null,"524ad900",null),m=u.exports,h={components:{VerificationCode:m},name:"Register",data(){return{flag:!1,user:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}]}}},components:{VerificationCode:m},mounted(){},methods:{login(){this.$refs["userForm"].validate((e=>{if(e){if(this.user.password!==this.user.confirmPassword)return this.$message.error("两次输入的密码不一致"),!1;this.flag&&this.$axios.post("/register",this.user).then((e=>{"200"==e.data.code?(this.$message.success("注册成功"),this.$router.push("/login")):this.$message.error(e.data.msg)}))}}))},check(e){this.flag=e,this.login()}}},c=h,f=(0,l.Z)(c,r,o,!1,null,"73601984",null),p=f.exports}}]);
//# sourceMappingURL=61.d52dac77.js.map