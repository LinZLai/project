"use strict";(self["webpackChunksystem_vue"]=self["webpackChunksystem_vue"]||[]).push([[915],{68915:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("Search",{on:{search:e.searchRes}})],1),a("el-main",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","border-radius":"10px","box-shadow":"0 0 10px rgba(93, 89, 89, 0.1)"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"ownerId",label:"ownerId",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"adtheme",label:"广告主题","show-overflow-tooltip":"",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"状态:"+t.row.state,placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"正常","inactive-value":"冻结",disabled:""},model:{value:t.row.state,callback:function(a){e.$set(t.row,"state",a)},expression:"state.row.state"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"content",label:"内容摘要","show-overflow-tooltip":"",width:"400",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{label:"ttb",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-star-off"}),e._v(" 详情")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 删除")])]}}])},[a("template",{slot:"header"},[a("el-button",{staticClass:"el-icon-warning",staticStyle:{"margin-left":"22px"},attrs:{type:"danger"},on:{click:e.delBatch}},[e._v(" 批量删除")])],1)],2)],1)],1),a("el-footer",{staticStyle:{height:"20px, line-height=20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":6,layout:"prev, pager, next, jumper",total:this.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),a("el-drawer",{attrs:{direction:e.direction,visible:e.drawer,"with-header":!1,size:"50%"},on:{"update:visible":function(t){e.drawer=t}}},[a("span",[a("Edit",{attrs:{form:this.form}})],1)])],1)},r=[],l=(a(41539),a(54747),a(21249),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"广告id"},on:{change:e.onSubmit,blur:e.onSubmit},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-input",{attrs:{placeholder:"主题"},on:{blur:e.onSubmit,change:e.onSubmit},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}},model:{value:e.form.ADtheme,callback:function(t){e.$set(e.form,"ADtheme",t)},expression:"form.ADtheme"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"medium",autocomplete:"off"},on:{click:e.onSubmit},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}}},[e._v("搜索")]),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"medium",autocomplete:"off"},on:{click:e.clear},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.clear.apply(null,arguments)}}},[e._v("清空")])],1)],1)],1)}),i=[],o={name:"Search",data:function(){return{form:{id:"",ownerId:this.$store.getters.getUser.id,ADtheme:""}}},mounted:function(){},methods:{onSubmit:function(){var e=this;""!==this.form.id||""!==this.form.ADtheme?this.$axios.post("/search",this.form).then((function(t){e.$emit("search",t.data.data)})):this.$axios.get("/user/getAll?currentPage=1&id="+this.form.ownerId).then((function(t){e.$emit("search",t.data.data.records)}))},clear:function(){var e=this;this.form={},this.$axios.get("/user/getAll?currentPage=1&id="+this.form.ownerId).then((function(t){e.$emit("search",t.data.data.records)}))}}},s=o,c=a(1001),u=(0,c.Z)(s,l,i,!1,null,"bfb4dc8a",null),d=u.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit"},[a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"userForm",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-around","align-items":"center",wrap:"wrap"},attrs:{model:e.userForm,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.id,callback:function(t){e.$set(e.userForm,"id",t)},expression:"userForm.id"}})],1),a("el-form-item",{attrs:{label:"投放者姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1)],1),a("el-table",{staticStyle:{width:"100%",dispaly:"block"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"img",label:"广告图片",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img,width:"100%",alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"date",label:"截止时间",width:"180"}}),a("el-table-column",{attrs:{prop:"content",label:"内容摘要"}})],1)],1)])},f=[],h={name:"Edit",props:{form:{type:Object,default:function(){return{id:"",name:"",address:""}}}},data:function(){return{userForm:this.form,tableData:[]}},mounted:function(){},watch:{form:{handler:function(e){this.userForm=e,this.getAD()},deep:!0}},created:function(){this.getAD()},methods:{getAD:function(){var e=this;this.$axios.get("/admin/getAD?id="+this.userForm.id).then((function(t){e.userForm=t.data.data,e.tableData.push(t.data.data.AD),e.tableData[0].date=e.$moment(e.tableData[0].date).format("YYYY-MM-DD HH:mm:ss")})).catch((function(t){e.$message({type:"error",message:"获取失败"})}))}}},p=h,b=(0,c.Z)(p,m,f,!1,null,"451e6ff0",null),g=b.exports,w={name:"Myallad",components:{Search:d,Edit:g},data:function(){return{tableData:[],multipleSelection:[],currentPage:1,total:20,drawer:!1,direction:"ttb",form:{}}},mounted:function(){},created:function(){this.getAll()},methods:{getAll:function(){var e=this;this.$axios.get("/user/getAll",{params:{currentPage:this.currentPage,id:this.$store.getters.getUser.id}}).then((function(t){e.tableData=t.data.data.records,e.currentPage=t.data.data.current,e.total=t.data.data.total}))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e.map((function(e){return e.id}))},handleEdit:function(e,t){this.form=t,this.drawer=!0},handleDelete:function(e,t){var a=this;this.$axios.delte("/admin/delete?id="+t.id).then((function(e){a.getAll()}))},searchRes:function(e){this.tableData=e},delBatch:function(){var e=this;this.$confirm("此操作将删除所有选中单位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.post("/admin/delBatch",{ids:e.multipleSelection}).then((function(t){200==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.multipleSelection=[],e.$refs.multipleTable.clearSelection(),e.getAll()):e.$message({type:"error",message:"删除失败!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(e){this.currentPage=e,this.getAll()}}},y=w,v=(0,c.Z)(y,n,r,!1,null,"4bd9f1b0",null),k=v.exports}}]);
//# sourceMappingURL=915-legacy.9a6bb36f.js.map